# AlertSight-API

Данный REST API реализует контракт взаимодействия [[AlertSight-client]] с [[AlertSight-server]] по следующим эндпоинтам:

Рут - '/api'
##### GET /ping
Данный эндпоинт позволяет понять, что сервер готов принимать входящие запрос

| response | описание                         |
| -------- | -------------------------------- |
| 200      | Сервер успешно ответил на запрос |
| 500      | Любой отличный от 200 код ответа |
##### POST /upload
Запись результатов object-detection в базу данных PostgreSQL

Request
```
type: string (accidentType) | Тип объекта/происшествия
source: integer (unitID)    | Источник (ID камеры/центра)
photo: string (photoUrl)    | Ссылка на снимок
```

| response | описание                           |
| -------- | ---------------------------------- |
| 200      | Сервер успешно записал данные в БД |
| 500      | Ошибка обработки                   |
##### GET /last_event
ID последнего записанного события (эндпоинт нужен для оптимизации проверки на наличие новых событий при запросе со стороны клиента)

Response
```
ID: integer (ID)    | ID последней записи в БД
```

| response | описание |
| -------- | -------- |
| 200      | Успешно  |
| 500      | Ошибка   |

##### GET /fetch/<id:integer>
Получение всех данных о событии по ID в базе данных

Request
```
type: string (accidentType)  | Тип объекта/происшествия
source: string (unitLocation)| Источник (географический адрес камеры)
date: string (dateTimestamp) | Время записи события
image: string (imageURL)     | Адрес изображения
```

| response | описание                             |
| -------- | ------------------------------------ |
| 200      | Сервер успешно направил данные из БД |
| 500      | Ошибка обработки                     |

